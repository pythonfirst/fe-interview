## 浏览器安全

同源策略：限制对不同源的DOM、数据（cookie、localStorage、indexDB）、网络请求的访问。

同源策略、CSP 和 CORS 之间的关系：同源策略就是说同源页面随你瞎搞，但是不同源之间想瞎搞只能通过浏览器提供的手段来搞

比如说：

1. 读取数据和操作 DOM 要用跨文档机制
2. 跨域请求要用 CORS 机制
3. 引用第三方资源要用 CSP

### xss(Cross Site Scripting)

恶意脚本可以窃取cookie信息、监听用户行为（addEventListener、修改DOM伪造登陆接口、页面内生成浮窗广告影响用户体验。

#### XSS分类

##### 存储型

在server的数据库里注入script，当页面展示时执行。

##### 反射型

用户通过url参数或者其他输入的地方将恶意代码提交给server，server又将该恶意代码反射给浏览器。

##### DOM型

#### 防范措施

1. 服务器进行转译：如<script>标签被转换为&l t;script&gt ;
2. 充分利用CSP
3. http协议set-cookie增加http-only。

在web资源传输过程中修改HTML，比如网络劫持。

措施1:内容安全策略(CSP)：服务器决定浏览器可以加载哪些资源，执行哪里内联JavaScript脚本，从而来解决XSS攻击问题。

措施2: set-cookie: httpOnly

v-html?

### CSRF(Cross Site Request Forgery)

跨站请求伪造

#### 防范措施

1. 重要数据设置sameSite为Strict/Lax/None

Strict 严格执行当前url与请求目标地址一致，不一致则不携带cookie。虽然网站安全了，但是会造成严重的用户体验，比如我之前已经登陆过github，关闭页面后去浏览其他页面，该页面有一个github链接，点进去后发现需要重新登陆github。你品品，你会不会骂娘。

Lax：当导航到目标网址为GET请求或者为<a>/<link>等等可以加载携带cookie。

None：任何跳转请求都可以携带

Chrome80之前sameSite默认值为None，80+为Lax。

1. 服务端通过request header referer判断是否可信
2. 服务端通过request header origin判断是否可信

































