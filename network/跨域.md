## 实现跨域的方式

### JSONP

客户端通过将script标签的src属性设置为要请求的url，浏览器自动发起get请求。同时客户端在windows上定义好该请求需要调用的回调函数。请求成功后，服务端会返回`callback(res)`字符串，客户端拿到响应后会自动执行该回调。

script标签不受同源策略影响，故可以间接实现跨域。

```html
// index.html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CORS</title>
</head>
<body>
    <h1>cors跨域测试</h1>
    <!-- <script>
        xhr = new XMLHttpRequest();
        xhr.open('PUT', 'http://b.com/hello1.json');
        xhr.withCredentials = true;
        xhr.send(JSON.stringify({world: 'hello'}));
        xhr.onload = (()=> {
            console.log('res',  xhr.response)
        })

    </script> -->
    <script>
      // 客户端定义好回调函数
      function callback(res) {
        console.log(res);
      }
      var src = `http://b.com/1.txt`;
      let script = document.createElement("script");
      script.src = src;
      document.getElementsByTagName("body")[0].appendChild(script);
    </script>
</body>
</html>
```

#### 优缺点



## CORS实现跨域

#### 简单请求

什么是简单请求

#### 优缺点



```javascript
Access-Control-Allow-Origin
Access-Control-Allow-Methods
Access-Control-Allow-Credentials
```



## 参考

[CORS的Same-Site属性](https://github.com/mqyqingfeng/Blog/issues/157)

